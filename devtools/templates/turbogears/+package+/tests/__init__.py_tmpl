# -*- coding: utf-8 -*-
"""Unit and functional test suite for {{project}}."""

import os
import sys

from tg import config
from paste.deploy import loadapp
from routes import url_for
from webtest import TestApp
from nose.tools import eq_

from {{package}} import model

__all__ = ['url_for', 'TestController']


def setUp():
    engine = config['pylons.app_globals'].sa_engine 
    model.init_model(engine)
    model.metadata.create_all(engine)


def tearDown():
    engine = config['pylons.app_globals'].sa_engine
    model.metadata.drop_all(engine)


class TestController(object):
    """Base functional test case for the controllers."""

    def __init__(self, *args, **kwargs):
        conf_dir = config.here
        wsgiapp = loadapp('config:test.ini', relative_to=conf_dir)
        self.app = TestApp(wsgiapp)
